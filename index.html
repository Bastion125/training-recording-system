<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Recording System</title>
    <link rel="stylesheet" href="frontend/app/styles/main.css">
    <link rel="stylesheet" href="frontend/app/styles/pdfViewer.css">
    <link rel="stylesheet" href="frontend/app/styles/knowledgeBase.css">
    <link rel="stylesheet" href="frontend/app/styles/personnel.css">
    <link rel="stylesheet" href="frontend/app/styles/admin.css">
    <!-- Quill.js –¥–ª—è rich text editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <style>
        /* –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å—Ç–∏–ª—ñ–≤ –¥–ª—è Quill editor */
        #knowledgeContentEditor, #editKnowledgeContentEditor {
            background: transparent !important;
        }
        .ql-editor {
            background: transparent !important;
            color: var(--text-light) !important;
            min-height: 200px;
        }
        .ql-editor p, .ql-editor h1, .ql-editor h2, .ql-editor h3, .ql-editor li, .ql-editor span {
            color: var(--text-light) !important;
        }
        .ql-container {
            background: transparent !important;
        }
        .ql-toolbar {
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid var(--border);
            border-left: 1px solid var(--border);
            border-right: 1px solid var(--border);
        }
        .ql-toolbar .ql-stroke {
            stroke: var(--text-light) !important;
        }
        .ql-toolbar .ql-fill {
            fill: var(--text-light) !important;
        }
        .ql-toolbar button:hover {
            background: rgba(230, 168, 87, 0.2) !important;
        }
        .ql-container.ql-snow {
            border: 1px solid var(--border);
            background: transparent !important;
        }
    </style>
</head>
<body>
    <!-- –ï–∫—Ä–∞–Ω –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó -->
    <div id="authScreen" class="auth-screen">
        <div class="auth-screen-content">
            <div class="heraldic-emblem-auth">
                <img src="frontend/app/assets/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <h1 class="auth-screen-title">Training Recording System</h1>
            <div class="auth-screen-subtitle">–ë–∞–∑–∞ –∑–Ω–∞–Ω—å —Ç–∞ –æ–±–ª—ñ–∫ –Ω–∞–≤—á–µ–Ω–æ—Å—Ç—ñ</div>
            <div class="auth-screen-buttons">
                <button class="auth-screen-btn primary" onclick="showLoginModal()">
                    üîê –£–≤—ñ–π—Ç–∏
                </button>
                <button class="auth-screen-btn secondary" onclick="showRegisterModal()">
                    üìù –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
                </button>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div id="mainContent" class="container" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <img src="frontend/app/assets/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo">
                    <div class="header-text">
                        <h1>Training Recording System</h1>
                        <div class="header-subtitle">–ë–∞–∑–∞ –∑–Ω–∞–Ω—å —Ç–∞ –æ–±–ª—ñ–∫ –Ω–∞–≤—á–µ–Ω–æ—Å—Ç—ñ</div>
                    </div>
                </div>
                <div class="header-actions">
                    <div id="userInfo" class="user-info" style="display: none;">
                        <div class="user-avatar-container">
                            <div id="userAvatar" class="user-avatar"></div>
                        </div>
                        <div class="user-details">
                            <span id="userName" class="user-name"></span>
                            <span id="userRole" class="user-role"></span>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button id="exportDbBtn" class="header-btn btn-secondary btn-small" onclick="exportDatabaseToFile()" title="–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ë–î —É —Ñ–∞–π–ª">üíæ –ï–∫—Å–ø–æ—Ä—Ç</button>
                            <button id="importDbBtn" class="header-btn btn-secondary btn-small" onclick="importDatabaseFromFile().then(() => { if(confirm('–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω?')) location.reload(); }).catch(() => {})" title="–Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ë–î –∑ —Ñ–∞–π–ª—É">üì• –Ü–º–ø–æ—Ä—Ç</button>
                            <button id="clearDbBtn" class="header-btn btn-secondary btn-small" onclick="clearDatabaseStorage()" title="–û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ö–æ–≤–∏—â–µ –ë–î (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø—ñ—Å–ª—è –µ–∫—Å–ø–æ—Ä—Ç—É)">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
                            <button class="header-btn logout-btn" onclick="logout()" title="–í–∏–π—Ç–∏ –∑ —Å–∏—Å—Ç–µ–º–∏">
                                üö™ –í–∏–π—Ç–∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" data-section="profile" onclick="showSection('profile', this)">
                üë§ –ü—Ä–æ—Ñ—ñ–ª—å
            </div>
            <div class="nav-tab" data-section="knowledge" onclick="showSection('knowledge', this)">
                üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω—å
            </div>
            <div class="nav-tab" data-section="courses" onclick="showSection('courses', this)">
                üéì –ö—É—Ä—Å–∏
            </div>
            <div id="adminTab" class="nav-tab" data-section="admin" onclick="showSection('admin', this)" style="display: none;">
                ‚öôÔ∏è –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—è
            </div>
            <div id="readitTab" class="nav-tab" data-section="readit" onclick="showSection('readit', this)" style="display: none;">
                üìù –Ü–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
            </div>
            <div id="personnelTab" class="nav-tab" data-section="personnel" onclick="showSection('personnel', this)" style="display: none;">
                üë• –û—Å–æ–±–æ–≤–∏–π —Å–∫–ª–∞–¥
            </div>
            <div id="crewsTab" class="nav-tab" data-section="crews" onclick="showSection('crews', this)" style="display: none;">
                üöÅ –ï–∫—ñ–ø–∞–∂—ñ
            </div>
            <div id="equipmentTab" class="nav-tab" data-section="equipment" onclick="showSection('equipment', this)" style="display: none;">
                üõ†Ô∏è –ó–∞—Å–æ–±–∏
            </div>
        </div>

        <!-- Sections -->
        <!-- Knowledge Base -->
        <div id="knowledge" class="section">
            <div class="section-header">
                <h2>–ë–∞–∑–∞ –∑–Ω–∞–Ω—å</h2>
                <div class="section-header-actions">
                    <div class="knowledge-tabs">
                        <button class="knowledge-tab active" onclick="showKnowledgeTab('materials')">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏</button>
                        <button class="knowledge-tab" onclick="showKnowledgeTab('practice')">–ü—Ä–∞–∫—Ç–∏–∫–∞</button>
                    </div>
                    <button class="btn-primary" id="addKnowledgeBtn" style="display: none;" onclick="showAddKnowledgeModal()">
                        ‚ûï –î–æ–¥–∞—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª
                    </button>
                </div>
            </div>
            <div id="knowledgeContent" class="knowledge-content">
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>
            <div id="practiceContent" class="practice-content" style="display: none;">
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>
        </div>

        <!-- Courses -->
        <div id="courses" class="section">
            <div class="section-header">
                <h2>–ö—É—Ä—Å–∏</h2>
                <button class="btn-primary" id="addCourseBtn" style="display: none;" onclick="showAddCourseModal()">
                    ‚ûï –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫—É—Ä—Å
                </button>
            </div>
            <div id="coursesContent" class="courses-content">
                <div class="view-toggle">
                    <button class="toggle-btn active" data-view="list" onclick="toggleView('list')">üìã –°–ø–∏—Å–æ–∫</button>
                    <button class="toggle-btn" data-view="grid" onclick="toggleView('grid')">‚äû –ü–ª–∏—Ç–∫–∞</button>
                </div>
                <div id="coursesList" class="courses-list"></div>
            </div>
        </div>

        <!-- Personnel (–¥–ª—è Readit+) -->
        <div id="personnel" class="section" style="display: none;">
            <div class="form-card">
                <div class="form-title">–î–æ–¥–∞—Ç–∏ –≤—ñ–π—Å—å–∫–æ–≤–æ—Å–ª—É–∂–±–æ–≤—Ü—è</div>
                <form id="personnelForm">
                    <input type="hidden" id="personnelId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>–°–ª—É–∂–±–æ–≤–∏–π –Ω–æ–º–µ—Ä (–®–ü–ö)</label>
                            <input type="text" id="serviceNumber" required>
                        </div>
                        <div class="form-group">
                            <label>–ü–Ü–ë</label>
                            <input type="text" id="fullName" required>
                        </div>
                        <div class="form-group">
                            <label>–ü–æ—Å–∞–¥–∞</label>
                            <input type="text" id="position" required>
                        </div>
                        <div class="form-group">
                            <label>–ó–≤–∞–Ω–Ω—è</label>
                            <select id="rank" required>
                                <option value="">–í–∏–±–µ—Ä—ñ—Ç—å –∑–≤–∞–Ω–Ω—è</option>
                                <option value="—Ä–µ–∫—Ä—É—Ç">–†–µ–∫—Ä—É—Ç</option>
                                <option value="—Å–æ–ª–¥–∞—Ç">–°–æ–ª–¥–∞—Ç</option>
                                <option value="—Å—Ç–∞—Ä—à–∏–π —Å–æ–ª–¥–∞—Ç">–°—Ç–∞—Ä—à–∏–π —Å–æ–ª–¥–∞—Ç</option>
                                <optgroup label="–°–µ—Ä–∂–∞–Ω—Ç—Å—å–∫–∏–π —Å–∫–ª–∞–¥">
                                    <option value="–º–æ–ª–æ–¥—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç">–ú–æ–ª–æ–¥—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="—Å–µ—Ä–∂–∞–Ω—Ç">–°–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="—Å—Ç–∞—Ä—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç">–°—Ç–∞—Ä—à–∏–π —Å–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="–≥–æ–ª–æ–≤–Ω–∏–π —Å–µ—Ä–∂–∞–Ω—Ç">–ì–æ–ª–æ–≤–Ω–∏–π —Å–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="—à—Ç–∞–±-—Å–µ—Ä–∂–∞–Ω—Ç">–®—Ç–∞–±-—Å–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="–º–∞–π—Å—Ç–µ—Ä-—Å–µ—Ä–∂–∞–Ω—Ç">–ú–∞–π—Å—Ç–µ—Ä-—Å–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="—Å—Ç–∞—Ä—à–∏–π –º–∞–π—Å—Ç–µ—Ä-—Å–µ—Ä–∂–∞–Ω—Ç">–°—Ç–∞—Ä—à–∏–π –º–∞–π—Å—Ç–µ—Ä-—Å–µ—Ä–∂–∞–Ω—Ç</option>
                                    <option value="–≥–æ–ª–æ–≤–Ω–∏–π –º–∞–π—Å—Ç–µ—Ä-—Å–µ—Ä–∂–∞–Ω—Ç">–ì–æ–ª–æ–≤–Ω–∏–π –º–∞–π—Å—Ç–µ—Ä-—Å–µ—Ä–∂–∞–Ω—Ç</option>
                                </optgroup>
                                <option value="–º–æ–ª–æ–¥—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç">–ú–æ–ª–æ–¥—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç</option>
                                <option value="–ª–µ–π—Ç–µ–Ω–∞–Ω—Ç">–õ–µ–π—Ç–µ–Ω–∞–Ω—Ç</option>
                                <option value="—Å—Ç–∞—Ä—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç">–°—Ç–∞—Ä—à–∏–π –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç</option>
                                <option value="–∫–∞–ø—ñ—Ç–∞–Ω">–ö–∞–ø—ñ—Ç–∞–Ω</option>
                                <option value="–º–∞–π–æ—Ä">–ú–∞–π–æ—Ä</option>
                                <option value="–ø—ñ–¥–ø–æ–ª–∫–æ–≤–Ω–∏–∫">–ü—ñ–¥–ø–æ–ª–∫–æ–≤–Ω–∏–∫</option>
                                <option value="–ø–æ–ª–∫–æ–≤–Ω–∏–∫">–ü–æ–ª–∫–æ–≤–Ω–∏–∫</option>
                                <option value="–±—Ä–∏–≥–∞–¥–Ω–∏–π –≥–µ–Ω–µ—Ä–∞–ª">–ë—Ä–∏–≥–∞–¥–Ω–∏–π –≥–µ–Ω–µ—Ä–∞–ª</option>
                                <option value="–≥–µ–Ω–µ—Ä–∞–ª-–º–∞–π–æ—Ä">–ì–µ–Ω–µ—Ä–∞–ª-–º–∞–π–æ—Ä</option>
                                <option value="–≥–µ–Ω–µ—Ä–∞–ª-–ª–µ–π—Ç–µ–Ω–∞–Ω—Ç">–ì–µ–Ω–µ—Ä–∞–ª-–ª–µ–π—Ç–µ–Ω–∞–Ω—Ç</option>
                                <option value="–≥–µ–Ω–µ—Ä–∞–ª">–ì–µ–Ω–µ—Ä–∞–ª</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª *</label>
                            <input type="text" id="unit" required placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É">
                        </div>
                        <div class="form-group">
                            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                            <input type="text" id="phone">
                        </div>
                        <div class="form-group">
                            <label>–î–æ–ø—É—Å–∫ –¥–æ –ë–ó (–ë–æ–π–æ–≤–∞ –ó–æ–Ω–∞)</label>
                            <select id="combatZoneAccess" title="–î–æ–ø—É—Å–∫ –¥–æ –±–æ–π–æ–≤–æ—ó –∑–æ–Ω–∏ - –¥–æ–∑–≤—ñ–ª –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å —É –∑–æ–Ω—ñ –±–æ–π–æ–≤–∏—Ö –¥—ñ–π">
                                <option value="false">–ù—ñ</option>
                                <option value="true">–¢–∞–∫</option>
                            </select>
                            <small style="display: block; margin-top: 5px; color: var(--primary-dark); font-size: 11px;">–í–∫–∞–∑—É—î, —á–∏ –º–∞—î –≤—ñ–π—Å—å–∫–æ–≤–æ—Å–ª—É–∂–±–æ–≤–µ—Ü—å –¥–æ–ø—É—Å–∫ –¥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å —É –±–æ–π–æ–≤—ñ–π –∑–æ–Ω—ñ</small>
                        </div>
                        <div class="form-group">
                            <label>–ï–∫—ñ–ø–∞–∂</label>
                            <select id="crewId">
                                <option value="">–ë–µ–∑ –µ–∫—ñ–ø–∞–∂—É</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    <button type="button" class="secondary" onclick="resetPersonnelForm()">–°–∫–∏–Ω—É—Ç–∏</button>
                </form>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label>–†—ñ–≤–µ–Ω—å –Ω–∞–≤—á–µ–Ω–æ—Å—Ç—ñ</label>
                    <select id="filterLevel" onchange="applyPersonnelFilters()">
                        <option value="">–í—Å—ñ</option>
                        <option value="0">0 - –°—ñ—Ä–∏–π</option>
                        <option value="1">1 - –ß–µ—Ä–≤–æ–Ω–∏–π</option>
                        <option value="2">2 - –ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π</option>
                        <option value="3">3 - –ó–µ–ª–µ–Ω–∏–π</option>
                        <option value="4">4 - –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω–∏–π</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>–¢–∏–ø –ë–ü–õ–ê</label>
                    <input type="text" id="filterUavType" placeholder="–í—Å—ñ —Ç–∏–ø–∏" oninput="applyPersonnelFilters()">
                </div>
                <div class="filter-group">
                    <label>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª</label>
                    <input type="text" id="filterUnit" placeholder="–í—Å—ñ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª–∏" oninput="applyPersonnelFilters()">
                </div>
                <div class="filter-group">
                    <label>–î–æ–ø—É—Å–∫ –¥–æ –ë–ó (–ë–æ–π–æ–≤–∞ –ó–æ–Ω–∞)</label>
                    <select id="filterCombatZone" onchange="applyPersonnelFilters()" title="–§—ñ–ª—å—Ç—Ä –∑–∞ –¥–æ–ø—É—Å–∫–æ–º –¥–æ –±–æ–π–æ–≤–æ—ó –∑–æ–Ω–∏">
                        <option value="">–í—Å—ñ</option>
                        <option value="true">–¢—ñ–ª—å–∫–∏ –¥–æ–ø—É—â–µ–Ω—ñ</option>
                        <option value="false">–¢—ñ–ª—å–∫–∏ –Ω–µ –¥–æ–ø—É—â–µ–Ω—ñ</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>–ö—É—Ä—Å</label>
                    <select id="filterCourse" onchange="applyPersonnelFilters()">
                        <option value="">–í—Å—ñ</option>
                    </select>
                </div>
            </div>

            <div class="personnel-grid" id="personnelGrid"></div>
        </div>

        <!-- Profile -->
        <div id="profile" class="section active">
            <div class="section-header">
                <h2>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞ –∫–∞—Ä—Ç–∫–∞</h2>
            </div>
            <div id="profileContent" class="profile-content">
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>
        </div>

        <!-- Admin Section -->
        <div id="admin" class="section">
            <div class="section-header">
                <h2>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ü—ñ—è</h2>
            </div>
            <div id="adminContent" class="admin-content">
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>
        </div>

        <!-- Readit Section -->
        <div id="readit" class="section">
            <div class="section-header">
                <h2>–ü–∞–Ω–µ–ª—å —ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞</h2>
            </div>
            <div id="readitContent" class="readit-content">
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>
        </div>

        <!-- Crews Section -->
        <div id="crews" class="section" style="display: none;">
            <div class="form-card">
                <div class="form-title">–î–æ–¥–∞—Ç–∏ –µ–∫—ñ–ø–∞–∂</div>
                <form id="crewForm">
                    <input type="hidden" id="crewId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞ –µ–∫—ñ–ø–∞–∂—É</label>
                            <input type="text" id="crewName" required>
                        </div>
                        <div class="form-group">
                            <label>–¢–∏–ø –ë–ü–õ–ê</label>
                            <select id="crewUavType" required>
                                <option value="">–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –ë–ü–õ–ê</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>–°–∫–ª–∞–¥ –µ–∫—ñ–ø–∞–∂—É</label>
                        <div class="search-dropdown">
                            <input type="text" class="search-input" id="crewMemberSearch" placeholder="–ü–æ—à—É–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª—É..." oninput="searchPersonnelForCrew(this.value)" onfocus="showPersonnelDropdown()">
                            <div class="dropdown-results" id="personnelDropdown"></div>
                        </div>
                        <div id="selectedCrewMembers" style="margin-top: 15px; display: flex; flex-wrap: wrap; gap: 10px;"></div>
                    </div>
                    <button type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    <button type="button" class="secondary" onclick="resetCrewForm()">–°–∫–∏–Ω—É—Ç–∏</button>
                </form>
            </div>

            <div class="form-card">
                <div class="form-title">–°–ø–∏—Å–æ–∫ –µ–∫—ñ–ø–∞–∂—ñ–≤</div>
                <div id="crewsList"></div>
            </div>
        </div>

        <!-- Equipment Section -->
        <div id="equipment" class="section" style="display: none;">
            <div class="form-card">
                <div class="form-title">–î–æ–¥–∞—Ç–∏ –∑–∞—Å—ñ–± (–ë–ü–õ–ê)</div>
                <form id="equipmentForm">
                    <input type="hidden" id="equipmentId">
                    <div class="form-row">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞</label>
                            <input type="text" id="equipmentName" required>
                        </div>
                        <div class="form-group">
                            <label>–¢–∏–ø</label>
                            <select id="equipmentType" required>
                                <option value="">–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø</option>
                                <option value="–º—É–ª—å—Ç–∏—Ä–æ—Ç–æ—Ä–Ω–∏–π —Ä–æ–∑–≤—ñ–¥—É–≤–∞–ª—å–Ω–∏–π">–ú—É–ª—å—Ç–∏—Ä–æ—Ç–æ—Ä–Ω–∏–π —Ä–æ–∑–≤—ñ–¥—É–≤–∞–ª—å–Ω–∏–π</option>
                                <option value="–º—É–ª—å—Ç–∏—Ä–æ—Ç–æ—Ä–Ω–∏–π —Ç–∏–ø—É –∫–∞–º—ñ–∫–∞–¥–∑–µ">–ú—É–ª—å—Ç–∏—Ä–æ—Ç–æ—Ä–Ω–∏–π —Ç–∏–ø—É –∫–∞–º—ñ–∫–∞–¥–∑–µ</option>
                                <option value="–ª—ñ—Ç–∞–∫–æ–≤–∏–π —Ç–∏–ø">–õ—ñ—Ç–∞–∫–æ–≤–∏–π —Ç–∏–ø</option>
                                <option value="—ñ–Ω—à—ñ">–Ü–Ω—à—ñ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>–í–∏—Ä–æ–±–Ω–∏–∫</label>
                            <input type="text" id="equipmentManufacturer">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>–ü—Ä–∏–º—ñ—Ç–∫–∏</label>
                        <textarea id="equipmentNotes" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</label>
                        <div class="file-upload-area" id="fileUploadArea" onclick="document.getElementById('equipmentImageInput').click()">
                            <p style="color: var(--primary); margin-bottom: 10px;">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—é–¥–∏</p>
                            <input type="file" id="equipmentImageInput" accept="image/*" style="display: none;" onchange="handleEquipmentImageUpload(event)">
                            <img id="equipmentImagePreview" class="image-preview" style="display: none;">
                        </div>
                    </div>
                    <button type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    <button type="button" class="secondary" onclick="resetEquipmentForm()">–°–∫–∏–Ω—É—Ç–∏</button>
                </form>
            </div>

            <div class="form-card">
                <div class="form-title">–°–ø–∏—Å–æ–∫ –∑–∞—Å–æ–±—ñ–≤</div>
                <div class="equipment-grid" id="equipmentGrid"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ -->
    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'loginModal')">
        <div class="modal-content auth-modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">–í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</div>
                <button class="close-btn" onclick="closeModal('loginModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="loginForm" onsubmit="handleLogin(event); return false;">
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" id="loginEmail" required autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="loginPassword" required autocomplete="current-password">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">–£–≤—ñ–π—Ç–∏</button>
                        <button type="button" class="btn-secondary" onclick="closeModal('loginModal')">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'registerModal')">
        <div class="modal-content auth-modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</div>
                <button class="close-btn" onclick="closeModal('registerModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="registerForm" onsubmit="handleRegister(event); return false;">
                    <div class="form-group">
                        <label>–ü–Ü–ë (–ü–æ–≤–Ω–µ —ñ–º'—è)</label>
                        <input type="text" id="registerFullName" required autocomplete="name">
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" id="registerEmail" required autocomplete="email">
                    </div>
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="registerPassword" required autocomplete="new-password" minlength="8">
                        <small>–ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤</small>
                    </div>
                    <div class="form-group">
                        <label>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è</label>
                        <input type="password" id="registerPasswordConfirm" required autocomplete="new-password">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
                        <button type="button" class="btn-secondary" onclick="closeModal('registerModal')">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button type="button" class="btn-link" onclick="closeModal('registerModal'); window.location.href='../public/index.html'">‚Üê –ù–∞ –≥–æ–ª–æ–≤–Ω—É</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ -->
    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–∞—Ä—Ç–∫–∏ –≤—ñ–π—Å—å–∫–æ–≤–æ—Å–ª—É–∂–±–æ–≤—Ü—è -->
    <div id="personnelModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'personnelModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">–ö–∞—Ä—Ç–∫–∞ –≤—ñ–π—Å—å–∫–æ–≤–æ—Å–ª—É–∂–±–æ–≤—Ü—è</div>
                <button class="close-btn" onclick="closePersonnelModal()">‚úï</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–∞—Ä—Ç–∫–∏ –∑–∞—Å–æ–±—É -->
    <div id="equipmentModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'equipmentModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="equipmentModalTitle">–ö–∞—Ä—Ç–∫–∞ –∑–∞—Å–æ–±—É</div>
                <button class="close-btn" onclick="closeEquipmentModal()">‚úï</button>
            </div>
            <div class="modal-body" id="equipmentModalBody"></div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–∞—Ä—Ç–∫–∏ –µ–∫—ñ–ø–∞–∂—É -->
    <div id="crewModal" class="modal-overlay" onclick="closeModalOnOverlay(event, 'crewModal')">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div class="modal-title" id="crewModalTitle">–ö–∞—Ä—Ç–∫–∞ –µ–∫—ñ–ø–∞–∂—É</div>
                <button class="close-btn" onclick="closeCrewModal()">‚úï</button>
            </div>
            <div class="modal-body" id="crewModalBody"></div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script src="frontend/app/scripts/database.js"></script>
    <script src="frontend/app/scripts/localApi.js"></script>
    <script src="frontend/app/scripts/api.js"></script>
    <script src="frontend/app/scripts/auth.js"></script>
    <script src="frontend/app/scripts/main.js"></script>
    <script src="frontend/app/scripts/pdfViewer.js"></script>
    <script src="frontend/app/scripts/knowledgeBase.js"></script>
    <script src="frontend/app/scripts/personnel.js"></script>
    <script src="frontend/app/scripts/admin.js"></script>
    <script src="frontend/app/scripts/crews.js"></script>
    <script src="frontend/app/scripts/equipment.js"></script>
    <script src="frontend/app/scripts/courses.js"></script>
    <script>
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
        window.addEventListener('load', async () => {
            try {
                const useLocalDb = typeof window !== 'undefined' && window.USE_LOCAL_DB === true;

                // –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó (SQL.js) —Å–ø–æ—á–∞—Ç–∫—É —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –ë–î.
                // –î–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó (backend API) –ë–î –≤ –±—Ä–∞—É–∑–µ—Ä—ñ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞.
                if (useLocalDb) {
                    if (typeof initDatabase === 'function') {
                        const dbInitialized = await initDatabase();
                        if (!dbInitialized) return;
                    } else {
                        console.error('initDatabase function not found');
                        return;
                    }
                }

                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é
                if (typeof checkAuth === 'function') {
                    checkAuth();
                } else {
                    console.warn('checkAuth function not found');
                }
            } catch (error) {
                console.error('Initialization error:', error);
                if (typeof showNotification === 'function') {
                    showNotification('–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó: ' + error.message, 'error');
                }
            }
        });
    </script>
</body>
</html>

